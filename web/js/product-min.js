$(document).ready(function(){function c(a,b){var d=" ."+b;$(a+d).children().removeAttr("disabled");$(a+d).children().attr("name",b)}function e(a,b){var d=" ."+b;$(a+d).children().attr("disabled",!0);$(a+d).children().removeAttr("name")}$("#myTable").DataTable({columnDefs:[{orderable:!1,targets:[0,2,3,4,5,6,7,8,9]}],order:[[1,"desc"]]});$("#createp").append("<input type='submit' class='btn btn-success' id='newpsub' value='\u65b0\u589e\u5546\u54c1' />");$("body").on("click","#del",function(){$(this).prop("checked")?
$("input[type='checkbox']").prop("checked",!0):$("input[type='checkbox']").prop("checked",!1)});$("body").on("click",".edit",function(){$id="#"+$(this).attr("name");$(".edit").attr("disabled",!0);$(":checkbox,#delbtn").attr("disabled",!0);$(this).after("<input type='submit' value='\u78ba\u5b9a'><input type='button' class='cancel' value='\u53d6\u6d88'>");$(this).before("<input type='hidden' name='id' value='"+$id+"'>");$f=$(this).detach();$name=$($id+" .name");$price=$($id+" .price");$moq=$($id+" .moq");
$($name).html("<input type='text' name='name' value='"+$name.text()+"'>");$($price).html("<input type='number' min='0' name='price' value='"+$price.text()+"'>");$($moq).html("<input type='number' min='0' name='moq' value='"+$moq.text()+"'>");c($id,"company");c($id,"cata");c($id,"unit")});$("body").on("click",".cancel",function(){$(this).prevAll().detach();$(this).replaceWith($f);$(".edit").attr("disabled",!1);$(":checkbox,#delbtn").attr("disabled",!1);$($name).html($name.children().val());$($price).html($price.children().val());
$($moq).html($moq.children().val());e($id,"company");e($id,"cata");e($id,"unit")});$("body").on("click",":submit",function(){var a=confirm("\u78ba\u5b9a\u66f4\u6539?");if(a){jQuery.validator.addMethod("regex",function(a,b,c){return(new RegExp(c)).test(a)},"\u683c\u5f0f\u932f\u8aa4");var a={required:!0,regex:"^[0-9]+$"},b={required:"\u5fc5\u9700\u586b\u5beb",regex:"\u683c\u5f0f\u932f\u8aa4"};$("#createp").validate({rules:{name:{required:!0},price:a,moq:a},messages:{name:b,price:b,moq:b},errorPlacement:function(a,
b){$("#formmsg").html(a)},submitHandler:function(a){$.blockUI({message:'<img src="pages/images/loading_spinner.gif" height="42" />',fadeIn:0});a.submit()}})}else return a});$("body").on("change",".pstatus",function(){$id=$(this).attr("id");$.ajax({type:"POST",url:"Change.do",data:{stat:$(this).val(),id:$(this).attr("id")},dataType:"html",success:function(a){$("#tr"+$id).animate({backgroundColor:"green"},"fast");$("#tr"+$id).animate({backgroundColor:"white"},"fast")}})})});